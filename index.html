<script>
  // ====== EDIT THESE SETTINGS ======
  const SETTINGS = {
    storeName: "ZeroPoint",
    heroTitle: "ZeroPoint Market",
    heroText: "", // (empty like you wanted)
    discordUrl: "https://discord.com/",
    contactEmail: "youremail@example.com"
  };

  // ✅ PUT YOUR STRIPE PAYMENT LINKS HERE (https://buy.stripe.com/....)
  const PRODUCTS = [
    { name:"Product 01", price:"$5",  desc:"Short description here.", url:"https://buy.stripe.com/REPLACE_ME_01" },
    { name:"Product 02", price:"$9",  desc:"Short description here.", url:"https://buy.stripe.com/REPLACE_ME_02" },
    { name:"Product 03", price:"$3",  desc:"Short description here.", url:"https://buy.stripe.com/REPLACE_ME_03" },
    { name:"Product 04", price:"$12", desc:"Short description here.", url:"https://buy.stripe.com/REPLACE_ME_04" }
    // add more...
  ];

  function escapeHtml(str){
    return String(str).replace(/[&<>"']/g, s => ({
      "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#039;"
    }[s]));
  }

  function renderProducts(list){
    const grid = document.getElementById("grid");
    if (!grid) return;

    grid.innerHTML = list.map((p) => `
      <div class="card">
        <div class="thumb">
          <div class="thumb-badge">ZP</div>
        </div>
        <div class="card-body">
          <div class="name">${escapeHtml(p.name)}</div>
          <div class="desc">${escapeHtml(p.desc || "")}</div>
          <div class="row">
            <div class="price">${escapeHtml(p.price || "")}</div>
            <a class="buy-button" href="${p.url}" target="_blank" rel="noopener">Buy</a>
          </div>
        </div>
      </div>
    `).join("");
  }

  // Run AFTER page loads (prevents “nothing shows” issues)
  window.addEventListener("DOMContentLoaded", () => {
    // Apply settings
    const setText = (id, text) => {
      const el = document.getElementById(id);
      if (el) el.textContent = text;
    };

    setText("storeName", SETTINGS.storeName);
    setText("storeNameFooter", SETTINGS.storeName);
    setText("heroTitle", SETTINGS.heroTitle);
    setText("heroText", SETTINGS.heroText);

    ["discordTop","discordBtn","discordCta"].forEach(id => {
      const el = document.getElementById(id);
      if (el) el.href = SETTINGS.discordUrl;
    });

    const contactBtn = document.getElementById("contactBtn");
    if (contactBtn) contactBtn.href = `mailto:${SETTINGS.contactEmail}`;

    const yearEl = document.getElementById("year");
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    // ✅ Render products
    renderProducts(PRODUCTS);

    // Search
    const search = document.getElementById("search");
    if (search){
      search.addEventListener("input", (e) => {
        const q = e.target.value.toLowerCase().trim();
        const filtered = PRODUCTS.filter(p =>
          (p.name || "").toLowerCase().includes(q) ||
          (p.desc || "").toLowerCase().includes(q)
        );
        renderProducts(filtered);
      });
    }
  });

  // ====== Moving green starfield (canvas) ======
  const canvas = document.getElementById("stars");
  const ctx = canvas.getContext("2d");
  let w, h, dpr;
  let stars = [];

  function resize(){
    dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    w = canvas.clientWidth = window.innerWidth;
    h = canvas.clientHeight = window.innerHeight;
    canvas.width = Math.floor(w * dpr);
    canvas.height = Math.floor(h * dpr);
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    const count = Math.floor((w * h) / 9000);
    stars = Array.from({length: count}, () => makeStar(true));
  }

  function makeStar(randomY){
    return {
      x: Math.random() * w,
      y: (randomY ? Math.random() * h : -10),
      r: Math.random() * 1.6 + 0.2,
      a: Math.random() * 0.75 + 0.1,
      s: Math.random() * 0.55 + 0.15,
      tw: Math.random() * 0.6 + 0.4,
    };
  }

  function draw(){
    ctx.clearRect(0,0,w,h);

    ctx.globalCompositeOperation = "lighter";
    ctx.fillStyle = "rgba(50,255,106,0.02)";
    ctx.beginPath();
    ctx.ellipse(w*0.35, h*0.35, w*0.35, h*0.18, 0, 0, Math.PI*2);
    ctx.fill();
    ctx.beginPath();
    ctx.ellipse(w*0.70, h*0.70, w*0.30, h*0.16, 0, 0, Math.PI*2);
    ctx.fill();

    ctx.globalCompositeOperation = "source-over";
    for (const st of stars){
      st.y += st.s;
      if (st.y > h + 10) Object.assign(st, makeStar(false));

      const tw = 0.55 + 0.45 * Math.sin((Date.now()/800) * st.tw + st.x*0.01);
      const alpha = st.a * tw;

      ctx.beginPath();
      ctx.fillStyle = `rgba(50,255,106,${alpha * 0.6})`;
      ctx.arc(st.x, st.y, st.r * 2.2, 0, Math.PI*2);
      ctx.fill();

      ctx.beginPath();
      ctx.fillStyle = `rgba(200,255,215,${alpha})`;
      ctx.arc(st.x, st.y, st.r, 0, Math.PI*2);
      ctx.fill();
    }

    requestAnimationFrame(draw);
  }

  window.addEventListener("resize", resize);
  resize();
  draw();
</script>
